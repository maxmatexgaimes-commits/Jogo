<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Nossa HistÃ³ria Infinita ğŸ’–</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --rosa:#ff7eb6;
  --rosa2:#ffd1e8;
  --texto:#5a2a3d;
  --fundo:rgba(255,255,255,.95);
}

*{margin:0;padding:0;box-sizing:border-box;font-family:'Trebuchet MS','Comic Sans MS',cursive}
body{overflow:hidden;color:var(--texto)}

/* TELAS */
.screen{
  position:fixed; inset:0;
  display:none;
  justify-content:center;
  align-items:center;
  flex-direction:column;
  text-align:center;
}
.screen.active{display:flex}

/* INTRO */
#intro{
  background:#000;
}
#intro video{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  object-fit:cover;
  z-index:1;
}
#intro .overlay{
  position:absolute;
  inset:0;
  background:rgba(0,0,0,.55);
  z-index:2;
}
#intro .content{
  z-index:3;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:20px;
}
#intro h1{
  color:#fff;
  font-size:1.8em;
}

/* BOTÃ•ES */
button{
  padding:14px 36px;
  border:none;
  border-radius:30px;
  background:var(--rosa);
  color:#fff;
  font-size:1em;
  box-shadow:0 8px 18px rgba(0,0,0,.4);
}
button:active{transform:scale(.96)}

/* LIVRO */
#book{
  position:fixed;
  bottom:6px;
  white-space:nowrap;
  animation:book 22s linear infinite;
}
@keyframes book{from{left:100%}to{left:-100%}}

/* HISTÃ“RIA */
.dialog{
  position:absolute;
  bottom:0;
  width:100%;
  background:var(--fundo);
  padding:22px;
  border-radius:30px 30px 0 0;
}

/* JOGO */
#gameArea{position:relative;width:100%;height:100%}
#maxChar{position:absolute;bottom:110px;left:6%;font-size:48px;transition:left .5s}
#andrellyChar{position:absolute;bottom:110px;right:6%;font-size:48px}

/* BARRA */
#bar{width:80%;height:16px;background:#eee;border-radius:20px;overflow:hidden}
#fill{height:100%;width:0%;background:linear-gradient(90deg,#ff7eb6,#ffd1e8);transition:.5s}

/* CAPIVARA */
.capivara{
  position:absolute;
  font-size:28px;
  cursor:pointer;
}

/* FOTO */
#photo{width:300px;max-width:90vw;border-radius:25px}
</style>
</head>

<body>

<audio id="audio"></audio>
<div id="book">ğŸ“–âœ’ï¸ Nossa histÃ³ria estÃ¡ sendo escritaâ€¦ e nÃ£o vai acabar nunca ğŸ’–</div>

<!-- INTRO CORRIGIDA -->
<div id="intro" class="screen active">
  <video id="introVideo" muted playsinline preload="metadata">
    <source src="intro.mp4">
  </video>

  <div class="overlay"></div>

  <div class="content">
    <h1>Max ğŸ’– Andrelly</h1>
    <button onclick="start()">ComeÃ§ar nossa histÃ³ria ğŸ’–</button>
  </div>
</div>

<!-- HISTÃ“RIA -->
<div id="story" class="screen">
  <div class="dialog">
    <strong id="name"></strong>
    <p id="text"></p>
    <button onclick="nextChapter()">Continuar ğŸ’–</button>
  </div>
</div>

<!-- JOGO -->
<div id="game" class="screen" style="background-image:url('bg-cerejeira.jpg')">
  <div id="gameArea">
    <div id="maxChar">ğŸ§â€â™‚ï¸</div>
    <div id="andrellyChar">ğŸ’–</div>
  </div>
  <div class="dialog">
    <p>ConexÃ£o emocional ğŸ’</p>
    <div id="bar"><div id="fill"></div></div>
    <button onclick="connect()">Aproximar ğŸ’—</button>
  </div>
</div>

<!-- GALERIA -->
<div id="gallery" class="screen" style="background-image:url('bg-cerejeira.jpg')">
  <div class="dialog">
    <h2>ğŸ“¸ Nossas MemÃ³rias</h2>
    <img id="photo">
    <button onclick="nextPhoto()">PrÃ³xima</button>
  </div>
</div>

<!-- FINAL -->
<div id="end" class="screen" style="background-image:url('bg-noite.jpg')">
  <div class="dialog">
    <h1>Para sempre nÃ³s ğŸ’</h1>
    <p id="timer"></p>
    <button onclick="location.reload()">RecomeÃ§ar ğŸ’–</button>
  </div>
</div>

<script>
/* TELAS */
const screens=[...document.querySelectorAll(".screen")];
const show=id=>{
  screens.forEach(s=>s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
};

/* MÃšSICA */
const audio=document.getElementById("audio");
const playlist=["musica1.mp3","musica2.mp3","musica3.mp3"];
let track=0;
function playMusic(){
  audio.src=playlist[track];
  audio.volume=.6;
  audio.play();
}
audio.onended=()=>{track=(track+1)%playlist.length;playMusic()};

/* HISTÃ“RIA */
const chapters=[
["Narrador","Em 11 de setembro de 2025, tudo comeÃ§ou ğŸŒ…"],
["Max","Eu me senti em casa quando te conheci ğŸ’–"],
["Andrelly","Seu jeito me trouxe paz ğŸŒ¸"],
["Narrador","As conversas viraram conexÃ£o ğŸ’¬"],
["Max","Promete ficar comigo? ğŸ’"]
];
let chapter=0;

/* START */
function start(){
  const v=document.getElementById("introVideo");
  if(v) v.pause();   // evita bug
  playMusic();
  show("story");
  loadChapter();
}

function loadChapter(){
  name.textContent=chapters[chapter][0];
  text.textContent=chapters[chapter][1];
}
function nextChapter(){
  chapter++;
  if(chapter<chapters.length) loadChapter();
  else show("game");
}

/* JOGO */
let progress=0;
function connect(){
  progress+=20;
  fill.style.width=progress+"%";
  maxChar.style.left=(6+progress/2)+"%";
  if(progress>=100) startGallery();
}

/* GALERIA */
let p=1;
function startGallery(){
  show("gallery");
  photo.src="foto1.jpg";
}
function nextPhoto(){
  p++;
  if(p>10) finish();
  else photo.src=`foto${p}.jpg`;
}

/* FINAL */
function finish(){
  show("end");
  const startDate=new Date("2025-09-11T00:00:00");
  setInterval(()=>{
    const d=new Date()-startDate;
    const days=Math.floor(d/86400000);
    const h=Math.floor(d/3600000)%24;
    const m=Math.floor(d/60000)%60;
    const s=Math.floor(d/1000)%60;
    timer.textContent=`Juntos hÃ¡ ${days} dias ${h}h ${m}m ${s}s ğŸ’–`;
  },1000);
}
</script>

</body>
</html>
